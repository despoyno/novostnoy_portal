<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='admin.css') }}">
</head>
<body>
    <!-- Header -->
    <header class="admin-header">
        <div class="header-content">
            <h1>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h1>
            <nav class="admin-nav">
                <a href="{{ url_for('news') }}" class="nav-link">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –Ω–æ–≤–æ—Å—Ç—è–º</a>
                <a href="{{ url_for('add_news') }}" class="nav-link">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å—Ç–∞—Ç—å—é</a>
                <a href="#add-news" class="nav-link">–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å</a>
                <a href="#moderate-news" class="nav-link">–ú–æ–¥–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π</a>
                <a href="#manage-permissions" class="nav-link">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∞–º–∏</a>
            </nav>
        </div>
    </header>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="container">
        <!-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–µ–π -->
        <section id="add-news" class="content-section">
            <h2>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏</h2>
            <form action="/admin" method="POST" class="admin-form">
                <div class="form-group">
                    <label for="title">–ó–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–æ–≤–æ—Å—Ç–∏:</label>
                    <input type="text" id="title" name="title" required>
                </div>
                <div class="form-group">
                    <label for="content">–¢–µ–∫—Å—Ç –Ω–æ–≤–æ—Å—Ç–∏:</label>
                    <textarea id="content" name="content" rows="5" required></textarea>
                </div>
                <div class="form-group">
                    <label for="category">–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
                    <select class="sele" name="category" id="category">
                        <option value="1" {% if category == '1' %}selected{% endif %}>–º–µ–¥–∏—Ü–∏–Ω–∞ü©∫</option>
                        <option value="2" {% if category == '2' %}selected{% endif %}>–ø–æ–ª–∏—Ç–∏–∫–∞üåç</option>
                        <option value="3" {% if category == '3' %}selected{% endif %}>—É—á—ë–±–∞üìö</option>
                        <option value="4" {% if category == '4' %}selected{% endif %}>—Å–ø–æ—Ä—Ç‚öΩ</option>
                        <option value="5" {% if category == '5' %}selected{% endif %}>–¥—Ä—É–≥–æ–µüí´</option>
                        <option value="6" {% if category == '6' %}selected{% endif %}>üî≠–ù–∞—É–∫–∞üî¨</option>
                        <option value="7" {% if category == '7' %}selected{% endif %}>üñ•Ô∏è–¢–µ—Ö–Ω–∏–∫–∞üì±</option>
                    </select>
                </div>
                <button type="submit" class="button">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –Ω–æ–≤–æ—Å—Ç—å</button>
            </form>
        </section>

        <!-- –ú–æ–¥–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π -->
        <section id="moderate-news" class="content-section">
            <h2>–ú–æ–¥–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π</h2>
            <table class="admin-table">
                <thead>
                    <tr>
                        <th>–ó–∞–≥–æ–ª–æ–≤–æ–∫</th>
                        <th>–ê–≤—Ç–æ—Ä</th>
                        <th>–°—Ç–∞—Ç—É—Å</th>
                        <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                        <th>–î–µ–π—Å—Ç–≤–∏–µ</th>
                    </tr>
                </thead>
                <tbody>
                    {% for news in pending_news %}
                    <tr>
                        <td>{{ news['title'] }}</td>
                        <td>{{ news['username'] or '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π' }}</td>
                        <td>{% if news['moderated'] %}–û–¥–æ–±—Ä–µ–Ω–æ‚úÖ{% else %}–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏‚è≥{% endif %}</td>
                        <td>
                            {% set categories = {
                                1: '–º–µ–¥–∏—Ü–∏–Ω–∞ü©∫',
                                2: '–ø–æ–ª–∏—Ç–∏–∫–∞üåç',
                                3: '—É—á—ë–±–∞üìö',
                                4: '—Å–ø–æ—Ä—Ç‚öΩ',
                                6: 'üî≠–ù–∞—É–∫–∞üî¨',
                                7: 'üñ•Ô∏è–¢–µ—Ö–Ω–∏–∫–∞üì±'
                            } %}
                            {{ categories[news['category']] | default('–¥—Ä—É–≥–æ–µüí´') }}
                        </td>
                        <td>
                            <form action="/approve-news/{{ news['id'] }}" method="POST" class="inline-form">
                                <button type="submit" class="button approve-btn">–û–¥–æ–±—Ä–∏—Ç—å</button>
                            </form>
                            <form action="/reject-news/{{ news['id'] }}" method="POST" class="inline-form">
                                <button type="submit" class="button reject-btn" style="background-color: #dc3545; color: white; border: none; padding: 5px 10px; border-radius: 5px;">
                                    –û—Ç–∫–ª–æ–Ω–∏—Ç—å
                                </button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </section>

        <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∞–º–∏ -->
        <section id="manage-permissions" class="content-section">
            <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>
            <table class="admin-table">
                <thead>
                    <tr>
                        <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                        <th>–†–æ–ª—å</th>
                        <th>–ü—Ä–∞–≤–∞ –Ω–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏—é</th>
                        <th>–î–µ–π—Å—Ç–≤–∏–µ</th>
                    </tr>
                </thead>
                <tbody>
                    {% for user in users %}
                    <tr>
                        <td>{{ user['username'] }}</td>
                        <td>{{ user['role'] }}</td>
                        <td>
                            <form action="/toggle-permission/{{ user['id'] }}" method="POST" class="inline-form">
                                <input type="checkbox" name="publish_rights" {% if user['role'] == 'admin' %}checked{% endif %}>
                            </form>
                        </td>
                        <td>
                            <button class="button">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </section>
    </div>
</body>
</html>